server {
    listen 80;
    server_name _;

    root /var/www/html;
    index index.html;

    # Helps preserve the port in redirects when not on :80/:443
    absolute_redirect off;
    port_in_redirect on;

    # Single location to catch ANY URL ending in .html
    location ~* ^/.+\.html$ {
        # Avoid redirect loops if this is an internal sub-request (fallback)
        if ($uri != $request_uri) {
            break;
        }

        # 1) If it ends with "index.html", remove "index.html"
        #    e.g. /path/index.html => /path/
        #    e.g. /index.html => /
        rewrite "^/(.*)index\.html$" /$1 permanent;

        # 2) Otherwise remove ".html" and append slash
        #    e.g. /overview.html => /overview/
        rewrite "^/(.+)\.html$" /$1/ permanent;
    }

    # Serve robots.txt from a specific file
    location = /robots.txt {
        alias /var/www/robots.txt;
        access_log off;
        log_not_found off;
    }

    # Default static-file behavior
    location / {
        try_files $uri $uri/ =404;
    }
}