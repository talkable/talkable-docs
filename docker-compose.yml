services:
  docs-nginx:
    platform: linux/arm64/v8
    build:
      context: .
      dockerfile: Dockerfile
      args:
        ENVIRONMENT: ${ENVIRONMENT}
    container_name: docs-nginx-${ENVIRONMENT}
    restart: unless-stopped
    ports:
      - ${LOCAL_PORT}:80
    volumes:
      - docs_llms_txt:/var/www/html/md:ro

  docs-llms-txt:
    platform: linux/arm64/v8
    build:
      context: ./llms-txt
      dockerfile: Dockerfile
    container_name: docs-llms-txt-${ENVIRONMENT}
    restart: unless-stopped
    volumes:
      - docs_llms_txt:/app/output
    depends_on:
      - docs-nginx

volumes:
  docs_llms_txt:
    name: docs_llms_txt
    driver: local
